import{s as t,y as e,m as r,d as i,l as o,b as a,P as n}from"../index.aa8a182b.js";import{Q as s}from"./Quote.1c3934d5.js";import{V as l}from"./VizHeading.9a4f3f3d.js";import{S as d,T as u,W as f,o as c,a6 as m,a7 as p,a0 as $,a5 as y,Y as h}from"./util.5ff5d05e.js";import{l as g}from"./line.c34b5aa1.js";function v(t,e){let r=0,i=0;if(void 0===e)for(let o of t)null!=o&&(o=+o)>=o&&(++r,i+=o);else{let o=-1;for(let a of t)null!=(a=e(a,++o,t))&&(a=+a)>=a&&(++r,i+=a)}if(r)return i/r}var b=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var i=Array(t),o=0;for(e=0;e<r;e++)for(var a=arguments[e],n=0,s=a.length;n<s;n++,o++)i[o]=a[n];return i};function k(t,e,r){var i=t.length-e.length,o=Array.from(e);if(0===i)return t.apply(void 0,o);if(1===i){var a=function(e){return t.apply(void 0,b([e],o))};return(r||t.lazy)&&(a.lazy=r||t.lazy,a.lazyArgs=e),a}throw new Error("Wrong number of arguments")}function w(){return k(x(!1),arguments)}var x=function(t){return function(e,r){var i={};return e.forEach((function(o,a){var n=t?r(o,a,e):r(o),s=String(n);i[s]||(i[s]=[]),i[s].push(o)})),i}};function j({data:i,line:o,stroke:a,opacity:n=1}){const s=t(null);return e((()=>{s.current&&d(s.current).transition().duration(750).attr("opacity",n)}),[n]),r`<g ref=${s}><path style=${{stroke:a,fill:"none",strokeWidth:3,opacity:.7}} d=${o(i.left)}/><path style=${{stroke:a,fill:"none",strokeWidth:3,opacity:.7}} d=${o(i.right)}/></g>`}function z({decades:t,chosen:e}){const{chartHeight:i,chartWidth:o}=u(),a=function(t,e){let r;if(void 0===e)for(const i of t)null!=i&&(r<i||void 0===r&&i>=i)&&(r=i);else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(r<o||void 0===r&&o>=o)&&(r=o)}return r}(Object.keys(t).flatMap((e=>[...t[e]]))),n=f().range([0,o]).domain([-a/2,a/2]),s=f().domain([0,89]).range([0,i]),l={top:0,bust:18,waist:39,hips:74,bottom:89},d=c().range(m[9]).domain(Object.keys(t).concat("")),$=g().x((t=>n(t[1]))).y((t=>s(l[t[0].toString()]))).curve(p),y=1/2.3;return r`<${j} line=${$} stroke=${"yellow"} data=${{left:[["top",-35*y],["bust",-39*y],["waist",-18*y],["hips",-33*y],["bottom",-33*y]],right:[["top",35*y],["bust",39*y],["waist",18*y],["hips",33*y],["bottom",33*y]]}}/>${Object.keys(t).map(((i,o)=>r`<${j} opacity=${e&&i===e?1:e&&i!==e?0:1} key=${i} line=${$} stroke=${d(i)} data=${{left:[["top",-(t[i][0]-4)*y],["bust",-t[i][0]*y],["waist",-t[i][1]*y],["hips",-t[i][2]*y],["bottom",-t[i][2]*y]],right:[["top",(t[i][0]-4)*y],["bust",t[i][0]*y],["waist",t[i][1]*y],["hips",t[i][2]*y],["bottom",t[i][2]*y]]}}/>`))}<${j} line=${$} stroke=${"red"} data=${{left:[["top",-32*y],["bust",-36*y],["waist",-24*y],["hips",-36*y],["bottom",-36*y]],right:[["top",32*y],["bust",36*y],["waist",24*y],["hips",36*y],["bottom",36*y]]}}/>`}function S(){const a=i((()=>{const t=w(h,(t=>`${t.date.getFullYear().toString().slice(0,3)}0s`));return Object.keys(t).reduce(((e,r)=>({...e,[r]:[v(t[r],(t=>$(t.bustCM))),v(t[r],(t=>$(t.waistCM))),v(t[r],(t=>$(t.hipsCM)))]})),{})}),[]),n=c().range(m[8]).domain(Object.keys(a)),[s,l]=o(null),u=t(null);return e((()=>{u.current&&d(u.current).selectAll("div[data-key]").transition().duration(750).style("background",(function(){const t=this.attributes["data-key"].value;return s?s===t?n(t):"transparent":n(t)}))}),[s]),r`<div style=${{display:"flex",position:"relative",justifyContent:"center",maxWidth:"600px",margin:"auto"}}><${y} aspectRatio=${1} margin=${30}><${z} decades=${a} chosen=${s}/><//><div style=${{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)"}} ref=${u}>${Object.keys(a).map((t=>r`<div key=${t} style=${{display:"flex",marginBottom:"0.25rem",fontSize:"0.8rem",cursor:"pointer",alignItems:"center"}} onClick=${()=>{l(t===s?null:t)}}><div data-key=${t} style=${{height:"1rem",width:"1rem",border:`2px solid ${n(t)}`,marginRight:"0.25rem"}}/> ${t}</div>`))}<div style=${{display:"flex",marginBottom:"0.25rem",fontSize:"0.8rem",alignItems:"center"}}><div style=${{height:"1rem",width:"1rem",background:"red",border:"2px solid red",marginRight:"0.25rem"}}/>  “Ideal” </div><div style=${{display:"flex",marginBottom:"0.25rem",fontSize:"0.8rem",alignItems:"center"}}><div style=${{height:"1rem",width:"1rem",background:"yellow",border:"2px solid yellow",marginRight:"0.25rem"}}/>  Barbie doll </div></div></div>`}function O({data:t}){return r`<${a}>${t.map(((t,e)=>"title"===t.type?r`<h2 key=${e}>${t.value}</h2>`:"text"===t.type?r`<${n} key=${e} data=${[t]}/>`:"quote"===t.type?r`<${s} key=${e} data=${t}/>`:"viz"===t.type?r`<div><${l} data=${t.value}/><${S}/></div>`:void 0))}<//>`}!function(t){t.indexed=function(){return k(x(!0),arguments)}}(w||(w={}));export default O;